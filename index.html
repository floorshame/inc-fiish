<link rel="stylesheet" href="stylesheet.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="icon" href="img/fishingrod.png">
<title>fishnet</title>   
<html>
    <head>
        <div id="TABSwitcher">


            <button onclick="TabSwitch('home')" style="margin-left: 5px;" class="TABButton"><span class="material-symbols-rounded tabbuttonicon">&#xe88a;</span>Home</button>
            <button onclick="TabSwitch('shop')" class="TABButton">Shop</button>
            <button onclick="TabSwitch('other')" class="TABButton">Other</button>
            <button onclick="TabSwitch('settings')" class="TABButton">Settings</button>

            <button class="TABButton" onclick="fishclicked(game.FishPerClick)">Fish</button>

            <h1 class="logotext">fishnet</h1>
            <h1 class="versiontext">0.0.0.1</h1>


        </div>
        <center>
        <p class="fishscore">Fish - <span id="fishamnt">0</span></p>
        <p class="fps">FPS - <span id="FPS">0</span></p>

        </center>
    </head>

    <body>



        <div id="TAB_Home">
        <center>
            <img id="" draggable="false" class="FishButton" src="img/fishingrod.png" width="10%" onclick="fishclicked(game.FishPerClick)">
        </center>

        </div>



        <div id="TAB_Shop">
            <div class="Shop_Seperator" style="margin-left: 2%">
                <center>
                    <h1 class="Shop_Header">Buildings</h1>
                    <button class="PurchaseButton" onclick="purchaseBuilding(0)">Fishnet | Cost: <span id="fishnetcost">15</span> | Owned: <span id="fishnetowned">0</span></button>
                    </br>
                    <button class="PurchaseButton" onclick="purchaseBuilding(1)">FishFarmer | Cost: <span id="fishfarmercost">500</span> | Owned: <span id="fishfarmerowned">0</span></button>
                    </br>
                    <button class="PurchaseButton" style="margin-bottom: 2%;" onclick="purchaseBuilding(2)">Boat | Cost: <span id="boatcost">2000</span> | Owned: <span id="boatowned">0</span></button>

                </center>
            </div>
        </div>











        <div id="TAB_Settings">
            <button class="savebutton" onclick="saveGame();">Save</button>
            <button class="resetbutton" onclick="resetGame();">Reset</button>

        </div>


    </body>
    <div>
        <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
        <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(255,255,255,0.1" />
        <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(255,255,255,0.1)" />
        </g>
        </svg>
        </div>
       
        









        <div id="TAB_Other">
            <div class="discordinvite">
                <a href="https://google.com">
                    <img src="img/discord.png" width="21.3px" height="24px">

                </a>
            </div>
            <div class="updateseperator">
                <center>
                    <h1 class="updateheader">
                        Updates!
                    </h1>
                </center>
                    <h1 class="versiontext2">
                        0.0.0.1 | 22/06/22
                    </h1>
                    <h1 class="versiontext3">
- rewrote code to optimize
- added updates
                    </h1>
                    <h1 class="versiontext2">
                        0.0.0.2 | 23/06/22
                    </h1>
                    <h1 class="versiontext3">
- added keybind switching for tabs
- added loaded message in console
                    </h1>

            </div>
        </div>

</html>

<div id="notifcation">
    <h1 id="notifcationtext">

    </h1>
</div>




























<script>
    var game = {
    Fish: 0,
    FishPerClick: 1,
    FPS: 0
}

var building = {
    name: [ /* CASE SENSITIVE MAKE SURE ITS THE SAME AS THE ID IN HTML SPANS */
        "fishnet",
        "fishfarmer",
        "boat"
    ],
    cost: [
        15,
        500,
        2000
    ],
    income: [
        1,
        5,
        12
    ],
    owned: [
        0,
        0,
        0
    ],
}

var TabOpened = "home"; /* tab that is currently opened */

var HomeTab = document.getElementById("fishamnt");

document.getElementById("fishamnt").innerHTML = game.Fish;
function loadingscreen() {
    document.style.display = 'none';
}

function purchaseBuilding(buildingID) {
    if (game.Fish >= building.cost[buildingID]) {
        game.Fish = game.Fish - building.cost[buildingID];
        building.owned[buildingID] += 1;
        building.cost[buildingID] = Math.round(building.cost[buildingID] * 1.15);
        document.getElementById(building.name[buildingID] + "owned").innerHTML = building.owned[buildingID];
        document.getElementById(building.name[buildingID] + "cost").innerHTML = building.cost[buildingID];
        document.getElementById("fishamnt").innerHTML = game.Fish;
        updateFishPerSecond()

}
}

function fishclicked(amnt) {
    game.Fish = game.Fish + game.FishPerClick;
    document.getElementById("fishamnt").innerHTML = game.Fish;

} 


/* tab stuff*/
document.getElementById("TAB_Shop").style.display = 'none'
document.getElementById("TAB_Other").style.display = 'none';
document.getElementById("TAB_Settings").style.display = 'none';

function TabSwitch(Tab) {
    if (Tab == 'shop') {
        TabOpened = "shop"
        document.getElementById("TAB_Home").style.display = 'none';
        document.getElementById("TAB_Other").style.display = 'none';
        document.getElementById("TAB_Settings").style.display = 'none';
        document.getElementById("TAB_Shop").style.display = '';
    }
    if (Tab == 'home') {
        TabOpened = "home"
        document.getElementById("TAB_Home").style.display = '';
        document.getElementById("TAB_Other").style.display = 'none';
        document.getElementById("TAB_Settings").style.display = 'none';
        document.getElementById("TAB_Shop").style.display = 'none';
    }
    if (Tab == 'other') {
        document.getElementById("TAB_Home").style.display = 'none';
        document.getElementById("TAB_Settings").style.display = 'none';
        document.getElementById("TAB_Other").style.display = '';
        document.getElementById("TAB_Shop").style.display = 'none';
    }
    if (Tab == 'settings') {
        document.getElementById("TAB_Home").style.display = 'none';
        document.getElementById("TAB_Settings").style.display = '';
        document.getElementById("TAB_Other").style.display = 'none';
        document.getElementById("TAB_Shop").style.display = 'none';
    }
}

document.addEventListener("keydown", function(event) {
    if (event.which == 49) { //ctrl + s //
        event.preventDefault();
        TabSwitch('home')
    }
}, false);

document.addEventListener("keydown", function(event) {
    if (event.which == 50) { //ctrl + s //
        event.preventDefault();
        TabSwitch('shop')
    }
}, false);
document.addEventListener("keydown", function(event) {
    if (event.which == 51) { //ctrl + s //
        event.preventDefault();
        TabSwitch('other')

    }
}, false);
document.addEventListener("keydown", function(event) {
    if (event.which == 52) { //ctrl + s //
        event.preventDefault();
        TabSwitch('settings')

    }
}, false);


function saveGame() {
    var gamedata = {
        /* main vars*/
        Fish: game.Fish,
        FishPerClick: game.FishPerClick,
        FPS: game.FPS,
        /* building vars & also main vars ended */
        buildingcost: building.cost,
        buildingincome: building.income,
        buildingowned: building.owned
    };
    localStorage.setItem("gamedata", JSON.stringify(gamedata));
}
function loadGame () {
    var gamedata =  JSON.parse(localStorage.getItem("gamedata"));
    if (localStorage.getItem("gamedata") !== null) {
        if (typeof gamedata.Fish !== "undefined") game.Fish = gamedata.Fish;
        if (typeof gamedata.Fish !== "undefined") game.FishPerClick = gamedata.FishPerClick;
        if (typeof gamedata.Fish !== "undefined") game.FPS = gamedata.FPS;

        if (typeof gamedata.buildingowned !== "undefined") {
            for (i = 0; i < gamedata.buildingowned.length; i++) {
                building.owned[i] = gamedata.buildingowned[i];
            }
            }
            if (typeof gamedata.buildingincome !== "undefined") {
            for (i = 0; i < gamedata.buildingincome.length; i++) {
                building.income[i] = gamedata.buildingincome[i];
            }
            }
            if (typeof gamedata.buildingcost !== "undefined") {
            for (i = 0; i < gamedata.buildingcost.length; i++) {
                building.cost[i] = gamedata.buildingcost[i];
            }

        }

    }
    updateFishPerSecond();
}
function resetGame() {
    if (confirm("Are you sure!")) {
        var gamedata = {} ;
        localStorage.setItem("gamedata", JSON.stringify(gamedata));
        location.reload();
    }
}
document.addEventListener("keydown", function(event) {
    if (event.ctrlKey && event.which == 83) { //ctrl + s //
        event.preventDefault();
        saveGame();
    }
}, false);

window.onload = function() {
    loadGame();
    console.log('%cfishnet has been loaded', 'background: #000000; color: #c4f6ff');

};
loadGame();


function updateFishPerSecond() {
    game.FPS = building.owned[0] * building.income[0] + building.owned[1] * building.income[1] + building.owned[2] * building.income[2]
    document.getElementById("FPS").innerHTML = game.FPS;

}



setInterval(function() {
    game.Fish = game.Fish + building.owned[0] * building.income[0] + building.owned[1] * building.income[1] + building.owned[2] * building.income[2]
    document.getElementById("fishamnt").innerHTML = game.Fish;
    document.title = "fishnet - " + game.Fish;
}, 1000);

setInterval(function() {
    saveGame();
}, 30000);


</script>



